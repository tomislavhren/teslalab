!function(){"use strict";angular.module("tesla-lab",["ngRoute","ngTouch"])}(),function(){"use strict";function e(e,t){t.when("/",{templateUrl:"app/partials/main/main.html",controller:"MainController"}).when("/home",{templateUrl:"app/partials/home/home.html",controller:"HomeController"}).when("/experiments/details/:id",{templateUrl:"app/partials/experimentDetails/experimentDetails.html",controller:"ExperimentDetailsController"}).when("/blueprints/details/:id",{templateUrl:"app/partials/blueprints/blueprint.html",controller:"BlueprintController"}).when("/quiz",{templateUrl:"app/partials/quiz/quiz.html",controller:"QuizController"}).otherwise("/"),e.html5Mode(!0)}angular.module("tesla-lab").config(e),e.$inject=["$locationProvider","$routeProvider"]}(),function(){"use strict";function e(e){e.defaults.timeout=5e3}angular.module("tesla-lab").config(e),e.$inject=["$httpProvider"]}(),function(){"use strict";function e(){"serviceWorker"in navigator&&navigator.serviceWorker.register("/sw.js").then(function(){console.log("Service Worker Registered")})["catch"](function(e){console.log("ServiceWorker registration failed: ",e)})}function t(e,t){!t.release||"http"!==e.$$protocol&&"https"===e.$$protocol||(console.log("Redirecting to HTTPS."),window.location="https://"+window.location.hostname+window.location.pathname+window.location.search)}angular.module("tesla-lab").run(e).run(t),t.$inject=["$location","EnvMode"]}(),function(){"use strict";angular.module("tesla-lab").constant("$Geofence",{location:{FER:{lat:"45.8008118","long":"15.9710419"},TMZ:{lat:"45.8036592","long":"15.9637277"},SHP:{lat:"45.7970751","long":"15.9068438"}}}).constant("EnvMode",{location:"FER",minDistance:"200",release:!1}).constant("API",{baseUrl:"https://teslalabapi.azurewebsites.net/api"})}(),function(){"use strict";function e(e,t,n,r){t.showBackArrow=!1,t.$on("$routeChangeStart",function(){n.active=!0}),t.$on("$routeChangeSuccess",function(e,a,o){r(function(){n.active=!1},300),t.showBackArrow=a&&"/"===a.$$route.originalPath?!1:!0})}angular.module("tesla-lab").controller("IndexController",e),e.$inject=["$location","$scope","$rootScope","$timeout"]}(),function(){"use strict";function e(e,t){function n(n,r,a){var o=document.querySelectorAll("div[ng-view]");e.$on("$viewContentLoaded",function(){t(function(){componentHandler.upgradeElements(o)})})}var r={link:n,restrict:"A"};return r}angular.module("tesla-lab").directive("mdlUpgrade",e),e.$inject=["$rootScope","$timeout"]}(),function(){"use strict";function e(e){function t(t,n,r){n.on("click",function(){e.history.back()})}var n={link:t,restrict:"E",template:'<button type="button" class="nav-back-button mdl-button mdl-js-button mdl-button--icon"><i class="material-icons">arrow_back</i></button>'};return n}angular.module("tesla-lab").directive("navBackButton",e),e.$inject=["$window"]}(),function(){"use strict";function e(e){return{restrict:"A",link:function(e,t,n){var r=t[0],a=0;console.log("loading directive | scroll position"),t.bind("scroll",function(){var e=document.getElementById("home-tabs");if(e){var t=r.scrollTop;a>t?e.className="mdl-tabs__tab-bar sticky-down":(e.className="",e.className="mdl-tabs__tab-bar sticky-up"),a=t}else a=0})}}}angular.module("tesla-lab").directive("scrolly",e),e.$inject=["$window"]}(),function(){"use strict";function e(e,t,n){function r(e){var t=6371,n=a(e.lat2-e.lat1),r=a(e.lon2-e.lon1),o=Math.sin(n/2)*Math.sin(n/2)+Math.cos(a(e.lat1))*Math.cos(a(e.lat2))*Math.sin(r/2)*Math.sin(r/2),i=2*Math.atan2(Math.sqrt(o),Math.sqrt(1-o)),l=t*i;return 1e3*l}function a(e){return e*(Math.PI/180)}var o={};return o.getUserLocation=function(){function e(e){var t=e.coords,n={lat:t.latitude,"long":t.longitude};r.resolve(n)}function n(e){r.reject("ERROR("+e.code+"): "+e.message)}var r=t.defer(),a={enableHighAccuracy:!0,timeout:5e3,maximumAge:0};return navigator.geolocation.getCurrentPosition(e,n,a),r.promise},o.isValidLocation=function(){var a=t.defer();return o.getUserLocation().then(function(t){var o={lat1:t.lat,lon1:t["long"],lat2:e.location[n.location].lat,lon2:e.location[n.location]["long"]},i=r(o),l=i<n.minDistance?!0:!1;a.resolve(l)}),a.promise},o}angular.module("tesla-lab").factory("GeolocationService",e),e.$inject=["$Geofence","$q","EnvMode"]}(),function(){"use strict";function e(){function e(e,t,n){}var t={link:e,templateUrl:"app/components/blueprintCard/blueprintCard.template.html",restrict:"EA",scope:{id:"@bpId",name:"@bpName",imageUrl:"@bpImageUrl"}};return t}angular.module("tesla-lab").directive("blueprintCard",e),e.$inject=[]}(),function(){"use strict";function e(e){function t(t,n,r){function a(){t.time=i+t.i,t.i--,t.i<10&&(i="00:0"),0==t.i&&(t.time=i+t.i,e.cancel(o))}t.i=5;var o,i="00:";o=e(a,1e3),t.$on("$destroy",function(){e.cancel(o)})}var n={link:t,templateUrl:"app/components/stopwatch/stopwatch.template.html",restrict:"E"};return n}angular.module("tesla-lab").directive("stopwatch",e),e.$inject=["$interval"]}(),function(){"use strict";function e(){function e(e,t,n){}var t={link:e,templateUrl:"app/components/experimentCard/experimentCard.template.html",restrict:"EA",scope:{id:"@exId",name:"@exName",imageUrl:"@exImageUrl"}};return t}angular.module("tesla-lab").directive("experimentCard",e),e.$inject=[]}(),function(){"use strict";function e(e,t,n){var r=this;r.blueprint={},t.get("app/data/blueprints/"+n.id+".json").then(function(e){r.blueprint=e.data})}angular.module("tesla-lab").controller("BlueprintController",e),e.$inject=["$location","$http","$routeParams"]}(),function(){"use strict";function e(e,t,n,r){var a=this;a.experiment={};document.getElementById("video-ripple");a.gotoVideo=function(e){r.hash("video-section"),n()},t.get("app/data/"+e.id+".json").then(function(e){a.experiment=e.data})}angular.module("tesla-lab").controller("ExperimentDetailsController",e),e.$inject=["$routeParams","$http","$anchorScroll","$location"]}(),function(){"use strict";function e(e,t,n,r,a){a.ngClickOverrideEnabled(!0);var o=this,i=document.querySelectorAll(".mdl-tabs .mdl-tabs__panel"),l=document.querySelectorAll(".mdl-tabs__tab-bar a");o.blueprints=[{id:"daljuprbrodom",name:"Nacrt uređaja za daljinsko upravljanje brodom",imageUrl:"/assets/blueprints/daljuprbrodom.png"},{id:"prelen",name:"Nacrt uređaja za prijenos električne energije",imageUrl:"/assets/blueprints/prelen.png"},{id:"rasvisfrstr",name:"Rasvjeta pomoću visokofrekvencijske struje",imageUrl:"/assets/blueprints/rasvisfrstr.png"},{id:"teslinaturbina",name:"Teslina turbina",imageUrl:"/assets/blueprints/teslinaturbina.png"},{id:"teslinazavojnica",name:"Teslina zavojnica",imageUrl:"/assets/blueprints/teslinazavojnica.png"}],o.experiments=[{id:"tt100k",name:"Teslin transformator 100k volti",imageUrl:"/assets/tt100k.png"},{id:"okretnoEMP",name:"Okretno magnetsko polje",imageUrl:"/assets/okretnoEMP.png"},{id:"tt3M",name:"Teslin transformator 3M volti",imageUrl:"/assets/tt3m.png"},{id:"bezicnastruja",name:"Bežični prijenos EM titraja",imageUrl:"/assets/bezicni_prijenos.png"},{id:"faraday",name:"Faradayev kavez",imageUrl:"/assets/faraday_kavez.png"}],o.jumpTo=function(n){t.hash("anchor"+n),e(),t.hash("")},n.get("app/data/aboutTesla.json").then(function(e){o.aboutTesla=e.data}),o.swipeLeftTab=function(){var e=document.querySelector(".mdl-tabs__tab-bar .is-active"),t=Array.prototype.indexOf.call(l,e);(0==t||1==t)&&(l[t].className="mdl-tabs__tab",l[t+1].classList+=" is-active",i[t].className="mdl-tabs__panel",i[t+1].classList+=" is-active",componentHandler.upgradeElements(angular.element(l)))},o.swipeRightTab=function(){var e=document.querySelector(".mdl-tabs__tab-bar .is-active"),t=Array.prototype.indexOf.call(l,e);(2==t||1==t)&&(l[t].className="mdl-tabs__tab",l[t-1].classList+=" is-active",i[t].className="mdl-tabs__panel",i[t-1].classList+=" is-active",componentHandler.upgradeElements(angular.element(l)))}}angular.module("tesla-lab").controller("HomeController",e),e.$inject=["$anchorScroll","$location","$http","$rootScope","$touch"]}(),function(){"use strict";function e(e,t,n){var r=this;r.error="",r.isValid=!0,n.err&&(r.error=n.err,r.isValid=!1)}angular.module("tesla-lab").controller("MainController",e),e.$inject=["$Geofence","$scope","$routeParams"]}(),function(){"use strict";function e(e,t,n,r,a){function o(){i.counter--,s.style.width=(30-i.counter)*(10/3)+"%",i.counter<0&&(n.cancel(l),i.quizOver=!0)}var i=this;i.startSpinner=!1,i.questions=[],i.correctAnswers=[],i.incorrectAnswers=[],i.currentQuestion={},i["in"]=!1,i.quizOver=!1,i.ranks=[],i.resultsLoaded=!1,i.isCorrect=!1,i.isWrong=!1,i.counter=30,i.step=0,i.userScore={Id:0,Nickname:"",Score:0,Timestamp:null};var l,s,c=document.querySelector("#pbar");componentHandler.upgradeElements(c),c.addEventListener("mdl-componentupgraded",function(){this.MaterialProgress.setProgress(0)}),s=c.firstChild,i.result=function(){var e=0!=i.correctAnswers.length?i.correctAnswers.length:0,t=i.correctAnswers.length+i.incorrectAnswers.length;return e+" / "+t},i.getQuestions=function(){e.get("app/data/quizQuestions.json").then(function(e){e.data.sort(function(){return.5-Math.random()}),i.questions=e.data.slice(0,10),l=n(o,1e3),i.nextQuestion()})},i.isAnswerCorrect=function(e,t,n){var r=e.options[t].isTrue,o=n.currentTarget;r?(i.correctAnswers.push(e),o.classList+=" correct"):(i.incorrectAnswers.push(e),o.classList+=" wrong"),a(function(){i.nextQuestion()},600)},i.nextQuestion=function(){i.isCorrect=!1,i.isWrong=!1,i["in"]=!0,i.newQuestion=!0,i.currentQuestion=i.questions.pop(),i.currentQuestion||(n.cancel(l),i.step=1,componentHandler.upgradeElements(document.querySelector(".enter-nickname-container")),i.quizOver=!0)},i.getQuestions(),i.submitScore=function(){i.userScore.Timestamp=new Date,i.userScore.Score=i.correctAnswers.length,i.startSpinner=!0,componentHandler.upgradeElements(document.querySelector(".mdl-spinner")),e.post(r.baseUrl+"/Ranks",i.userScore).then(function(e){i.ranks=e.data,i.step=2,i.resultsLoaded=!0,i.startSpinner=!1},function(e){})},t.$watch("qc.quizOver",function(e){e&&n.cancel(l)}),t.$on("$destroy",function(){n.cancel(l)})}angular.module("tesla-lab").controller("QuizController",e),e.$inject=["$http","$scope","$interval","API","$timeout"]}();